<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Time and Date Widget</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { box-sizing: border-box; }
    body {
      background: #222;
      font-family: Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .flex-align-center {
      display: flex;
      align-items: flex-start;
      justify-content: center;
    }
    main.widget {
      display: flex;
      align-items: center;
      background: #2196f3;
      border-radius: 12px;
      box-shadow: 0 0 24px 6px #2196f3, 0 2px 8px rgba(0,0,0,0.4);
      padding: 0;
      min-width: 320px;
      max-width: 90vw;
    }
    .time-box {
      background: #111;
      border-radius: 8px 0 0 8px;
      padding: 18px 24px;
      display: flex;
      align-items: center;
      font-size: 2.2em;
      font-weight: bold;
      letter-spacing: 2px;
    }
    .time-box .hour { color: #f44336; }
    .time-box .minute { color: #4caf50; }
    .time-box .second { color: #1e88e5; }
    .time-box .colon { color: #fff; margin: 0 4px; }
    .time-box .ampm { color: #fff; font-size: 0.6em; margin-left: 12px; vertical-align: middle; }

    .date-box {
      background: transparent;
      border-radius: 0 8px 8px 0;
      padding: 12px 16px;
      color: #fff;
      text-align: center;
      min-width: 70px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .date-box .day { font-size: 1em; margin-bottom: 2px; }
    .date-box .date { font-size: 2em; font-weight: bold; margin-bottom: 2px; }
    .date-box .month { font-size: 1em; }

    @media (max-width: 500px) {
      main.widget {
        flex-direction: column;
        min-width: 0;
        width: 95vw;
        padding: 0;
      }
      .time-box, .date-box {
        border-radius: 8px 8px 0 0;
        padding: 12px 8px;
        font-size: 1.3em;
      }
      .date-box { border-radius: 0 0 8px 8px; }
    }

    .info-para {
      color: #fff;
      font-size: 1em;
      margin-bottom: 18px;
      text-align: center "+100+";
      max-width: 500px;
      display: flex;
      justify-content: center "+100+";
      align-items: center "+100+";
    }
    .timezone-select {
      margin: 18px auto 10px auto;
      display: block;
      font-size: 1em;
      padding: 6px 12px;
      border-radius: 6px;
      border: none;
    }
    .highlighted-day {
      background-color: #f44336;
      color: white;
      border-radius: 50%;
      font-weight: bold;
    }
    #calendar-table {
      width: 100%;
      border-collapse: collapse;
      text-align: center;
    }
    #calendar-table td {
      cursor: pointer;
      padding: 8px;
      border-radius: 50%;
    }
    .calendar-year-select,
    .calendar-month-select {
      font-size: 1em;
      padding: 4px 8px;
      border-radius: 6px;
      border: 1px solid #2196f3;
      margin-left: 8px;
    }
    .calendar-month-select { margin-left: 0; }
    .calendar-date-input {
      margin-left: 8px;
      font-size: 1em;
      padding: 4px 8px;
      border-radius: 6px;
      border: 1px solid #2196f3;
      width: 110px;
    }
    .calendar-container {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      padding: 18px;
      min-width: 320px;
      margin-top: 24px;
    }
    .calendar-controls {
      margin-bottom: 12px;
    }
  </style>
</head>
<body>
  <div class="flex-align-center">
    <div>
      <p class="info-para">
        The date below updates automatically, reflecting the current day, date, and month.
        This widget ensures you always see the latest date and time without needing to refresh the page.
      </p>

      <select id="timezone" class="timezone-select" aria-label="Select Country/Timezone">
        <option value="UTC">Universal Time (UTC, +00:00)</option>
        <option value="Europe/London">UK (GMT, +00:00)</option>
        <option value="Europe/Berlin">Germany (CET, +01:00)</option>
        <option value="Africa/Johannesburg">South Africa (SAST, +02:00)</option>
        <option value="Asia/Kolkata">India (IST, +05:30)</option>
        <option value="Asia/Tokyo">Japan (JST, +09:00)</option>
        <option value="Australia/Sydney">Australia (AEST, +10:00)</option>
        <option value="America/New_York">USA (EST, -05:00)</option>
        <option value="America/Los_Angeles">USA (PST, -08:00)</option>
      </select>

      <main class="widget" aria-label="Time and Date Widget">
        <section class="time-box" aria-label="Current Time">
          <span class="hour" id="hour" aria-label="Hour">00</span><span class="colon">:</span>
          <span class="minute" id="minute" aria-label="Minute">00</span><span class="colon">:</span>
          <span class="second" id="second" aria-label="Second">00</span>
          <span class="ampm" id="ampm" aria-label="AM/PM"></span>
        </section>
        <section class="date-box" aria-label="Current Date">
          <div class="day" id="day" aria-label="Day">Sunday</div>
          <div class="date" id="date" aria-label="Date">30</div>
          <div class="month" id="month" aria-label="Month">September</div>
        </section>
        <div class="calendar-controls">

      <div class="calendar-container">
        <div style="margin-bottom: 12px;">
          <select id="calendar-month" class="calendar-month-select" title="Select Month"></select>
          <select id="calendar-year" class="calendar-year-select" title="Select Year"></select>
          <input type="number" id="calendar-date-input" placeholder="Select a date" class="calendar-date-input" min="1" max="31">
        </div>
         <table id="calendar-table"></table>
      </div>
    </div>
  </div>

  <script>
    // Time and Date Widget Logic (24-hour + AM/PM)
    function updateWidget() {
      const timezone = document.getElementById('timezone').value;
      const now = new Date();
      const options = {
        timeZone: timezone,
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: false, // 24-hour format for display
        weekday: 'long',
        day: '2-digit',
        month: 'long',
        year: 'numeric'
      };
      const formatter = new Intl.DateTimeFormat('en-US', options);
      const parts = formatter.formatToParts(now);
      let data = {};
      parts.forEach(part => { data[part.type] = part.value; });
      // 24-hour format numbers
      document.getElementById('hour').textContent = data.hour.padStart(2, '0');
      document.getElementById('minute').textContent = data.minute.padStart(2, '0');
      document.getElementById('second').textContent = data.second.padStart(2, '0');
      document.getElementById('day').textContent = data.weekday;
      document.getElementById('date').textContent = data.day;
      document.getElementById('month').textContent = data.month;

      // Calculate AM/PM for the selected time zone
      // Get hour in selected timezone (need hour12: true for AM/PM part)
      const ampmFormatter = new Intl.DateTimeFormat('en-US', {
        timeZone: timezone,
        hour: '2-digit',
        hour12: true
      });
      const ampmParts = ampmFormatter.formatToParts(now);
      let ampm = ampmParts.find(p => p.type === 'dayPeriod');
      document.getElementById('ampm').textContent = ampm ? ampm.value : '';
    }

    document.getElementById('timezone').addEventListener('change', updateWidget);
    updateWidget();
    setInterval(updateWidget, 1000);

    // Calendar Widget Logic
    const monthNames = [
      "January", "February", "March", "April", "May", "June",
      "July", "August", "September", "October", "November", "December"
    ];

    function populateCalendarDropdowns() {
      const monthSelect = document.getElementById('calendar-month');
      const yearSelect = document.getElementById('calendar-year');
      monthSelect.innerHTML = "";
      yearSelect.innerHTML = "";

      monthNames.forEach((month, index) => {
        monthSelect.options[monthSelect.options.length] = new Option(month, index);
      });
      const currentYear = new Date().getFullYear();
      for (let y = currentYear - 125; y <= currentYear + 100; y++) {
        yearSelect.options[yearSelect.options.length] = new Option(y, y);
      }
      monthSelect.value = new Date().getMonth();
      yearSelect.value = currentYear;
    }

    function renderCalendar(month, year, highlightDay = 0) {
      const table = document.getElementById('calendar-table');
      table.innerHTML = '';
      const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      let header = table.insertRow();
      daysOfWeek.forEach(day => {
        let cell = header.insertCell();
        cell.textContent = day;
        cell.style.cssText = "padding:6px; color:#2196f3;";
      });
      const firstDay = new Date(year, month).getDay();
      const daysInMonth = 32 - new Date(year, month, 32).getDate();
      let date = 1;
      for (let i = 0; i < 6; i++) {
        let row = table.insertRow();
        for (let j = 0; j < 7; j++) {
          if (i === 0 && j < firstDay) {
            row.insertCell();
          } else if (date > daysInMonth) {
            break;
          } else {
            let cell = row.insertCell();
            cell.textContent = date;
            if (date === highlightDay) {
              cell.classList.add('highlighted-day');
            }
            date++;
          }
        }
      }
    }

    function updateCalendar() {
      const month = parseInt(document.getElementById('calendar-month').value);
      const year = parseInt(document.getElementById('calendar-year').value);
      const highlightDay = parseInt(document.getElementById('calendar-date-input').value) || 0;
      renderCalendar(month, year, highlightDay);
    }

    document.getElementById('calendar-month').addEventListener('change', updateCalendar);
    document.getElementById('calendar-year').addEventListener('change', updateCalendar);
    document.getElementById('calendar-date-input').addEventListener('input', updateCalendar);

    document.getElementById('calendar-table').addEventListener('click', function(e) {
      if (e.target && e.target.nodeName === 'TD' && e.target.textContent) {
        const day = parseInt(e.target.textContent);
        document.getElementById('calendar-date-input').value = day;
        updateCalendar();
      }
    });

    // Initialize calendar dropdowns and render for current month/year
    populateCalendarDropdowns();
    updateCalendar();
  </script>
</body>
</html>